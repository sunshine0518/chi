webpackJsonp([13],{XVVD:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("4YfN"),s=r.n(o),l=r("R4Sj"),a=r("oAV5"),i=r("ssT3"),n={name:"login",components:{commonTop:r("Mitt").a},data:function(){var e=this;return{identifyCodes:"1234567890",identifyCode:"",ruleForm:{tel:"",pass:"",checkPass:"",validate:"",flag:0},rules:{tel:[{required:!0,validator:function(t,r,o){""===r?o(new Error("请输入手机号")):a.a.phoneReg.test(e.ruleForm.tel)?o():o(new Error("请输入合法的手机号"))},trigger:"blur"}],pass:[{required:!0,validator:function(t,r,o){""===r?o(new Error("请输入密码")):a.a.nameReg.test(e.ruleForm.pwdReg)?(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),o()):o(new Error("请输入合法的密码"))},trigger:"blur"}],checkPass:[{required:!0,validator:function(t,r,o){""===r?o(new Error("请再次输入密码")):r!==e.ruleForm.pass?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}],validate:[{required:!0,trigger:"blur"}]}}},computed:{},mounted:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},methods:s()({},Object(l.b)("login",["getNewToken","getNewUser"]),{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$http.post("/api/user/selectUser",t.ruleForm).then(function(e){console.log(e.data);var r=e.data.token,o=e.data.user;if(console.log(e.data.user),t.getNewToken({token:r}),t.getNewUser({user:o}),i.a.set("accessToken",r),i.a.set("userInfo",o),t.$route.query.redirect){console.log("111");var s=t.$route.query.redirect;console.log(s),t.$router.push(s)}else console.log("222"),t.$router.push("/")})})},resetForm:function(e){this.$refs[e].resetFields()},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},makeCode:function(e,t){for(var r=0;r<t;r++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]},goRegister:function(){this.$router.push("/register")}})},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("commonTop",{attrs:{text_middle:"登录"}}),e._v(" "),r("div",{staticClass:"registeInfo"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"auto"}},[r("el-form-item",{attrs:{label:"手机号",prop:"name"}},[r("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"手机号"},model:{value:e.ruleForm.tel,callback:function(t){e.$set(e.ruleForm,"tel",t)},expression:"ruleForm.tel"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"密码"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"确认密码"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"验证码",prop:"validate"}},[r("el-input",{staticClass:"validate-code",attrs:{placeholder:"验证码"},model:{value:e.ruleForm.validate,callback:function(t){e.$set(e.ruleForm,"validate",t)},expression:"ruleForm.validate"}}),e._v(" "),r("div",{staticClass:"code",on:{click:e.refreshCode}},[r("s-identify",{attrs:{identifyCode:e.identifyCode}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),r("div",{staticClass:"goRegister",on:{click:e.goRegister}},[e._v("去注册?")])],1)},staticRenderFns:[]};var c=r("C7Lr")(n,u,!1,function(e){r("rvlp")},"data-v-0c58d406",null);t.default=c.exports},rvlp:function(e,t){}});
//# sourceMappingURL=13.2b60a4ee06c717112db6.js.map