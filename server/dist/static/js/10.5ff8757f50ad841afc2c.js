webpackJsonp([10],{"6Y8k":function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("4YfN"),i=a.n(e),o=a("R4Sj"),c=a("Mitt"),r=a("ssT3"),n={name:"pay",components:{commonTop:c.a},data:function(){return{addAddress:!1,address:"",acitvePayBlock:!1,payButton:"在线支付",payWays:[{way:"微信支付",active:!0},{way:"支付宝支付",active:!1}],user:{}}},created:function(){var s=this,t=this.$route.params.from;this.user=r.a.get("userInfo"),"addressList"===t?this.address=this.$route.params.address:this.$http.post("/api/address/selectAddressUser",{address_user:this.user.user_tel}).then(function(t){console.log(t.data),console.log(t.data.length),r.a.set("address",t.data),s.handle(t.data)})},computed:i()({},Object(o.c)("login",{token:"getToken"}),Object(o.c)("food",{food:"getFood",selectedFood:"getSelectedFood",count:"getCount",totalPrice:"getTotalPrice"}),Object(o.c)("shop",{shop:"getShop"}),{showFood:function(){if(!(this.selectedFood.length>3))return this.selectedFood;var s=[];this.selectedFood.forEach(function(t,a){if(s.push(t),3===a)return s})},delivery:function(){return this.shop.shop_delivery},realTotalPrice:function(){return Number(this.totalPrice)+Number(this.delivery)}}),methods:i()({},Object(o.b)("address",["getNewDeliveryAddress"]),{handle:function(s){s.length?(this.addAddress=!1,this.address=s[0],this.getNewDeliveryAddress({address:s})):this.addAddress=!0},addAddressByUser:function(){console.log(this.user.user_tel),this.$router.push({name:"addAddress",params:{address_user:this.user.user_tel}})},goAddressList:function(){this.$router.push({name:"addressList",params:{from:"pay"}})},selectWay:function(s){if(!/^在线支付$/.test(this.payButton))return console.log("111"),void this.payWays.forEach(function(s){s.active=!1});console.log("222"),this.payWays.forEach(function(s){s.active=!1}),this.payWays[s].active=!0},payOrder:function(){console.log("pay");var s=this;this.$http.get("/api/waitPay").then(function(t){console.log(t.data),1===t.data.status&&(s.acitvePayBlock=!0)})},confirmPay:function(){this.acitvePayBlock=!1,console.log(this.address),this.$router.push({name:"orderDetail",params:{realTotalPrice:this.realTotalPrice,address:this.address,from:"pay",price:this.totalPrice}})},canclePay:function(){this.acitvePayBlock=!0},goFoodDetail:function(){this.$router.push("/FoodDetail")}})},d={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"payBlock",class:{showPayBlock:s.acitvePayBlock}},[a("div",{staticClass:"payCon"},[s._v("去支付")]),s._v(" "),a("div",{staticClass:"buttons"},[a("span",{staticClass:"button_confirm",on:{click:s.confirmPay}},[s._v("确定")]),s._v(" "),a("span",{staticClass:"button_cancle",on:{click:s.canclePay}},[s._v("取消")])])]),s._v(" "),a("commonTop",{attrs:{text_middle:"提交订单"}}),s._v(" "),s.addAddress?a("div",{staticClass:"add_address",on:{click:s.addAddressByUser}},[s._m(0)]):s._e(),s._v(" "),s.addAddress?s._e():a("div",{staticClass:"user_Info"},[a("p",[a("span",{staticClass:"glyphicon glyphicon-user"},[s._v(s._s(s.address.delivery_user))]),s._v(" "),a("span",{staticClass:"el-icon-phone"},[s._v(s._s(s.address.delivery_tel))])]),s._v(" "),a("p",[a("span",[s._v(s._s(s.address.delivery_address))])]),s._v(" "),a("span",{staticClass:"el-icon-arrow-right moreAddress",on:{click:s.goAddressList}})]),s._v(" "),a("div",{staticClass:"payFood"},[a("el-row",[a("el-col",{attrs:{span:18}},s._l(s.selectedFood,function(s,t){return a("div",{key:t,staticClass:"grid-content payFood_pic"},[a("ul",[a("li",{staticClass:"payFood_list"},[a("img",{attrs:{src:s.commodity_pic}})])])])}),0),s._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content payFood_count",on:{click:s.goFoodDetail}},[a("span",[s._v("共"+s._s(s.count)+"件")]),s._v(" "),a("span",{staticClass:"el-icon-arrow-right"})])])],1)],1),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),a("div",{staticClass:"payWay"},[a("p",{staticClass:"payWay_title"},[s._v("支付方式")]),s._v(" "),a("div",{staticClass:"payWay_con"},[a("el-radio-group",{model:{value:s.payButton,callback:function(t){s.payButton=t},expression:"payButton"}},[a("el-radio-button",{attrs:{label:"在线支付"}}),s._v(" "),a("el-radio-button",{attrs:{label:"货到付款"}})],1)],1),s._v(" "),a("div",{staticClass:"payWay_selected"},s._l(s.payWays,function(t,e){return a("div",{key:e,staticClass:"ways_select",on:{click:function(t){return s.selectWay(e)}}},[a("span",[s._v(s._s(t.way))]),s._v(" "),a("span",{staticClass:"el-icon-success",class:{selected_icon:t.active}})])}),0)]),s._v(" "),a("div",{staticClass:"payMoney"},[a("p",{staticClass:"foods_money"},[a("span",[s._v("商品金额")]),a("span",{staticClass:"money_span"},[s._v(s._s(s.totalPrice)+"元")])]),s._v(" "),a("p",{staticClass:"foods_delivery"},[a("span",[s._v("运费")]),a("span",{staticClass:"money_span"},[s._v(s._s(s.delivery)+"元")])])]),s._v(" "),a("div",{staticClass:"submitOrder"},[a("div",{staticClass:"fukuanMoney"},[s._v("实付款:"+s._s(s.realTotalPrice)+"元")]),s._v(" "),a("div",{staticClass:"submitBlock",on:{click:s.payOrder}},[s._v("提交订单")])])],1)},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("span",[t("i",{staticClass:"el-icon-plus"}),this._v("新增收货地址")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"favor"},[t("div",{staticClass:"favor_left"},[t("span",{staticClass:"favor_text"},[this._v("优惠券")]),this._v(" "),t("span",{staticClass:"favor_num"},[this._v("0张可用")])]),this._v(" "),t("div",{staticClass:"favor_right"},[t("span",{staticClass:"favor_text"},[this._v("去使用")]),this._v(" "),t("span",{staticClass:"el-icon-arrow-right"})])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"beizhu"},[t("p",{staticClass:"beizhu_title"},[this._v("订单备注")]),this._v(" "),t("textarea",{staticClass:"beizhuText",attrs:{placeholder:"限50个字之内"}})])}]};var l=a("C7Lr")(n,d,!1,function(s){a("NH0y")},"data-v-41d4b9ce",null);t.default=l.exports},NH0y:function(s,t){}});
//# sourceMappingURL=10.5ff8757f50ad841afc2c.js.map